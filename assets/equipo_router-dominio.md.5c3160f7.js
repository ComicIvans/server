import{_ as e,c as a,o,a as s}from"./app.fe85c232.js";var n="/server/assets/nameservers.29c88db3.png";const q=JSON.parse('{"title":"Router y dominio","description":"","frontmatter":{"title":"Router y dominio","lang":"es-ES"},"headers":[{"level":2,"title":"Breve introducci\xF3n sobre las IPs","slug":"breve-introduccion-sobre-las-ips"},{"level":2,"title":"Dominio, \xBFqu\xE9 es y para qu\xE9 sirve?","slug":"dominio-\xBFque-es-y-para-que-sirve"},{"level":3,"title":"\xBFQu\xE9 son los subdominios?","slug":"\xBFque-son-los-subdominios"},{"level":3,"title":"Adquiriendo el dominio","slug":"adquiriendo-el-dominio"},{"level":3,"title":"Utilizando otros nameservers","slug":"utilizando-otros-nameservers"},{"level":2,"title":"Actualizando la IP p\xFAblica en el domino autom\xE1ticamente","slug":"actualizando-la-ip-publica-en-el-domino-automaticamente"},{"level":2,"title":"Toqueteando en el router","slug":"toqueteando-en-el-router"}],"relativePath":"equipo/router-dominio.md","lastUpdated":1656779050000}'),r={name:"equipo/router-dominio.md"},i=s('<h1 id="configuracion-del-router-y-del-dominio" tabindex="-1">Configuraci\xF3n del router y del dominio <a class="header-anchor" href="#configuracion-del-router-y-del-dominio" aria-hidden="true">#</a></h1><p>Aqu\xED nuestro objetivo ser\xE1 no tener que preocuparnos de nada que no sea el propio servidor. Para ello, hay que preocuparse moment\xE1neamente de dos elementos externos:</p><ul><li>Configurar el router de tu casa para que deje que el servidor sea un servidor.</li><li>Adquirir un dominio para que sea m\xE1s c\xF3modo conectarte al servidor y despreocuparte de cambios de la IP p\xFAblica.</li></ul><h2 id="breve-introduccion-sobre-las-ips" tabindex="-1">Breve introducci\xF3n sobre las IPs <a class="header-anchor" href="#breve-introduccion-sobre-las-ips" aria-hidden="true">#</a></h2><p>Aqu\xED vamos a hablar de dos tipos de IPs:</p><ul><li><strong>IP P\xFAblica:</strong> Esta es la IP con la que se puede acceder al servidor <em>(o cualquier otro dispositivo de tu red, si lo permites)</em> desde cualquier parte de internet.</li><li><strong>IP Local:</strong> Esta IP identifica al sevidor dentro de la red a la que est\xE1 conectado, pero no sirve fuera.</li></ul><p>Por desgracia, seguimos usando para ambos casos IPv4, pero bueno, menos da una piedra.</p><p>Lo que nos interesa aqu\xED es la IP p\xFAblica. Cuando queramos conectarnos al servidor o alguien m\xE1s quiera, queda feo que tengan que hacerlo con la IP. Aqu\xED es donde entran los <strong>dominios</strong>.</p><h2 id="dominio-\xBFque-es-y-para-que-sirve" tabindex="-1">Dominio, \xBFqu\xE9 es y para qu\xE9 sirve? <a class="header-anchor" href="#dominio-\xBFque-es-y-para-que-sirve" aria-hidden="true">#</a></h2><p>Un dominio es un pseud\xF3nimo para la IP, que es m\xE1s bonito y f\xE1cil de recordar que la propia IP.</p><p>En nuestro caso, el dominio es <code>servermamadisimo.xyz</code>, y cuando te intentas conectar a esa direcci\xF3n, el ordenador le pregunta qu\xE9 IP es a la que apunta la direcci\xF3n a unos servidoes especiales que se llaman <em>nameservers</em>. Estos servidores son una parte fundamental del DNS <em>(Domain Name System)</em>, que permite utilizar las direcciones en vez de las IPs. Normalmente los servidores DNS que se usan son los del propio proveedor de internet, pero se pueden cambiar para que sean a otros como <a href="https://my.nextdns.io" target="_blank" rel="noopener noreferrer">NextDNS</a>.</p><p>Los dominios <strong>hay que pagarlos</strong>, esta es la parte mala. Los m\xE1s baratos suelen estar entre 10\u20AC y 15\u20AC anuales, aunque el primer a\xF1o suele costar menos.</p><p>Una vez compras un dominio, puedes elegir a qu\xE9 IP apunta e incluso puedes crear <strong>subdominios</strong>.</p><h3 id="\xBFque-son-los-subdominios" tabindex="-1">\xBFQu\xE9 son los subdominios? <a class="header-anchor" href="#\xBFque-son-los-subdominios" aria-hidden="true">#</a></h3><p>Pues lo que va antes del dominio claro, esto es, para <code>servermamadisimo.xyz</code> podemos crear los subdominios <code>www.servermamadisimo.xyz</code>, <code>mc.servermamadisimo.xyz</code> o <code>nextcloud.servermamadisimo.xyz</code>. Esto es \xFAtil para separar los servcios que tienes en el servidor. Adem\xE1s, te permite apuntar a distintas IPs o incluso hacer redirecciones para cada subdominio.</p><p>Pero el hecho de tener un dominio no solo ayuda a la comodidad de recordarlo y escribirlo, a parte de que es necesario para poder usar subdominios, tambi\xE9n nos permite no preocuparnos de qu\xE9 pasa si la IP p\xFAblica del servidor cambia <em>(que puede ocurrir)</em>, solo tienes que decirle al dominio que se\xF1ale a la nueva IP. De no tener un dominio, tendr\xEDas que decirle a todas las personas que se conectan al servidor la nueva IP para que la cambien.</p><h3 id="adquiriendo-el-dominio" tabindex="-1">Adquiriendo el dominio <a class="header-anchor" href="#adquiriendo-el-dominio" aria-hidden="true">#</a></h3><p>Para comprar un dominio, primero debes buscar un proveedor, hay muchas elecciones. La nuestra fue <a href="https://www.onlydomains.com/account/login" target="_blank" rel="noopener noreferrer">OnlyDomains</a>, aunque <a href="https://www.namecheap.com/" target="_blank" rel="noopener noreferrer">Namecheap</a> tambi\xE9n puede ser una buena opci\xF3n. Despu\xE9s, tendr\xE1s que pensar en qu\xE9 nombre quieres para tu dominio y comprobar que est\xE9 disponible.</p><p>Una cosa muy importante a la hora de registrar un dominio es tener la protecci\xF3n <strong>Whois</strong>, porque as\xED evitar\xE1 que cualquiera que busque qui\xE9n ha registrado el dominio pueda saber tus datos personales como el n\xFAmero de tel\xE9fono y el correo electr\xF3nico. Puede llegarte mucho spam por no tener esta protecci\xF3n. Por suerte, suele costar poco o incluso estar inclu\xEDdo con el pago del dominio, como es nuestro caso.</p><h3 id="utilizando-otros-nameservers" tabindex="-1">Utilizando otros nameservers <a class="header-anchor" href="#utilizando-otros-nameservers" aria-hidden="true">#</a></h3><p>Cada dominio est\xE1 asociado a unos nameservers, que ser\xE1n los que digan a qu\xE9 IP apunta el dominio y cada subdominio que haya.</p><p>Por defecto, los proveedores de dominios suelen usar sus propios nameservers, pero puedes configurar tu dominio para que use otros. Eso es b\xE1sicamente como darle el control del dominio a otra p\xE1gina en vez de la p\xE1gina en la que has comprado el dominio. <strong>\xBFPor qu\xE9 querr\xEDas hacer esto?</strong> Pues porque hay p\xE1ginas como <a href="https://freedns.afraid.org/" target="_blank" rel="noopener noreferrer">FreeDNS</a> que te dan muchas facilidades para gestionar tu dominio y para actualizar la IP p\xFAblica de tu servidor en el dominio si cambia. Esto OnlyDomains, por ejemplo, no lo permite de una forma sencilla, por eso nosotros usamos los nameservers de FreeDNS en vez de los propios de OnlyDomains.</p><div class="warning custom-block"><p class="custom-block-title">ADVERTENCIA</p><p>Cambiar los nameservers de tu dominio puede tardar hasta 24 horas en hacerse en todo el mundo, hazlo solo si es necesario y tienes tiempo para esperar.</p></div><p>As\xED se ven los nameservers de nuestro dominio al cambiarlos a FreeDNS: <img src="'+n+`" alt="nameservers"></p><h2 id="actualizando-la-ip-publica-en-el-domino-automaticamente" tabindex="-1">Actualizando la IP p\xFAblica en el domino autom\xE1ticamente <a class="header-anchor" href="#actualizando-la-ip-publica-en-el-domino-automaticamente" aria-hidden="true">#</a></h2><p>FreeDNS nos permite gestionar todos los subdominios y actualizar la IP a la que apuntan s\xEDmplemente con un enlace, que debemos abrir desde el servidor. Esto har\xE1 que dejempos de preocuparnos por si estamos fuera de casa y de repente nuestra IP p\xFAblica cambia, ya que si no se actualizara autom\xE1ticamente, perder\xEDamos acceso al servidor a trav\xE9s del dominio y para poder conectarnos tendr\xEDamos que averiguar la nueva IP p\xFAblica, cosa que no es precisamente sencillo.</p><p>Teniendo una cuenta de FreDNS y el dominio con sus nameservers, podemos ir al apartado de <strong>Dynamic DNS</strong> y copiar la <strong>Direct URL</strong> para actualizar la IP de nuestro dominio.</p><p>Debemos tener installado <code>crontab</code>, un software para ejecutar tareas cada cierto tiempo. Ponemos en el servidor <code>sudo crontab -e</code> <em>(importante el sudo)</em> y el archivo deber\xEDa quedar m\xE1s o menos as\xED:</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># To define the time you can provide concrete values for</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># minute (m), hour (h), day of month (dom), month (mon),</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># and day of week (dow) or use &#39;*&#39; in these fields (for &#39;any&#39;).</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Notice that tasks will be started based on the cron&#39;s system</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># daemon&#39;s notion of time and timezones.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Output of the crontab jobs (including errors) is sent through</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># email to the user the crontab file belongs to (unless redirected).</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># For example, you can run a backup of all your user accounts</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># at 5 a.m every week with:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># For more information see the manual pages of crontab(5) and cron(8)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># m h  dom mon dow   command</span></span>
<span class="line"><span style="color:#A6ACCD;">1,6,11,16,21,26,31,36,41,46,51,56 </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> sleep 46 </span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> wget --no-check-certificate -O - UpdateURL </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /tmp/freedns_@_dominio_com.log </span><span style="color:#89DDFF;">2&gt;&amp;1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span></span>
<span class="line"></span></code></pre></div><p>Donde <code>UpdateURL</code> es la URL copiada de FreeDNS, que se ver\xE1 como <code>https://freedns.afraid.org/dynamic/update.php?cosas</code> y <code>dominio_com</code> es el dominio, que en nuestro caso ser\xEDa <code>servermamadisimo_xyz</code>.</p><p>Esto har\xE1 que cada 5 minutos se compruebe si la IP p\xFAblica del servidor ha cambiado y, si es as\xED, se actualizar\xE1 a la nueva. Adem\xE1s, el resultado se guarda en un archivo temporal en <code>/tmp/freedns_@_domino_com.log</code>.</p><h2 id="toqueteando-en-el-router" tabindex="-1">Toqueteando en el router <a class="header-anchor" href="#toqueteando-en-el-router" aria-hidden="true">#</a></h2>`,32),t=[i];function l(d,c,p,u,m,h){return o(),a("div",null,t)}var v=e(r,[["render",l]]);export{q as __pageData,v as default};
